<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Image2STL.Desktop.ViewModels"
        xmlns:controls="using:Image2STL.Desktop.Controls"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        d:DesignWidth="1120"
        d:DesignHeight="760"
        x:Class="Image2STL.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Image2STL">

    <Grid ColumnDefinitions="320,*" RowDefinitions="Auto,Auto,*,Auto" Margin="16" ColumnSpacing="16" RowSpacing="12">
        <Menu Grid.ColumnSpan="2">
            <MenuItem Header="_File">
                <MenuItem Header="_New Project" Click="NewProject_Click"/>
                <MenuItem Header="_Open Project..." Click="OpenProject_Click"/>
                <MenuItem Header="_Save Project" Click="SaveProject_Click"/>
                <MenuItem Header="Save Project _As..." Click="SaveProjectAs_Click"/>
            </MenuItem>
            <MenuItem Header="_Images">
                <MenuItem Header="_Add Images..." Click="AddImages_Click"/>
            </MenuItem>
        </Menu>
        <TextBlock Grid.Row="1" Grid.ColumnSpan="2" FontSize="20" FontWeight="SemiBold" Text="Image2STL Desktop MVP" />

        <Border Grid.Row="2" Background="#1F1F1F" CornerRadius="8" Padding="12" x:Name="DropZone">
            <DockPanel LastChildFill="True">
                <Button DockPanel.Dock="Bottom" Margin="0,12,0,0" HorizontalAlignment="Stretch" Click="AddImages_Click">Add Images</Button>
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Images}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate x:DataType="vm:ImageThumbnailViewModel">
                                <Border Margin="0,0,0,8" Padding="6" CornerRadius="6" Background="#2A2A2A">
                                    <StackPanel>
                                        <Image Source="{Binding Thumbnail}" Width="260" Height="140" Stretch="UniformToFill"/>
                                        <DockPanel Margin="0,6,0,0">
                                            <Button DockPanel.Dock="Right" Padding="8,2" Click="RemoveImage_Click" Tag="{Binding FilePath}">Remove</Button>
                                            <TextBlock VerticalAlignment="Center" Text="{Binding FileName}" TextTrimming="CharacterEllipsis"/>
                                        </DockPanel>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </DockPanel>
        </Border>

        <Border Grid.Row="2" Grid.Column="1" Background="#171717" CornerRadius="8" Padding="8">
            <controls:WireframeViewerControl/>
        </Border>

        <TextBlock Grid.Row="3" Grid.ColumnSpan="2" Text="{Binding Status}"/>
    </Grid>
</Window>
